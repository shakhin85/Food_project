# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Build & Run Commands

This project uses `uv` as the package manager.

- **Run the application**: `uv run main.py`
- **Install dependencies**: `uv sync`
- **Add a dependency**: `uv add <package>`

## Project Overview

A minimal Python 3.12+ project with a single entry point in `main.py`.

Этот проект направлен на работу с [API_iiko](https://ru.iiko.help/articles/api-documentations/iikoserver-api)

Принципы работы с API описаны здесь - https://ru.iiko.help/articles/#!api-documentations/printsipy-raboty

Отдельные сущности представляются в виде XML-документа. XML схема каждой сущности представлена в приложении.
Списки сущностей представлены в виде XML-документа, корневой элемент которого содержит XML-элементы, представляющие сущности.
Создание и изменение сущностей методом POST осуществляется передачей в качестве параметров запроса аттрибутов сущности. Таким образом возможно внесение изменений лишь в определённые поля без передачи неизменяемых значений. В заголовке запроса должен быть указан: Content-Type: application/x-www-form-urlencoded
Создание и изменение сущностей методом PUT осуществляется передачей в теле запроса самой сущности. Аттрибуты сущности, отсутствующие в теле запроса, примут значение по-умолчанию в случае создания сущности и сохранят свои значения в случае обновления. В заголовке запроса необходимо указывать : Content-Type: application/xml
При успешном создании сущности будет возвращён ответ с HTTP-статусом 201 (Created).
При успешном обновлении сущности будет возвращён ответ с HTTP-статусом 200 (OK).

## Авторизация:

Строка-токен, который необходимо передавать как cookie с именем key или как параметр key всех запросов

## Ограничения и рекомендации:

Облачные системы с открытым API всегда имеют ограничения по использованию, чтобы предоставлять клиентам максимально надежный и стабильный сервис.

Ниже находится список ограничений для работы с iikoServer:

Запросы должны выполнятся последовательно друг за другом. Каждый следующий запрос должен быть отправлен только после того, как выполнился предыдущий запрос.
Запрашивайте данные за период не длиннее одного месяца, в идеале — за один день или неделю.
Если вам не нужны общие результаты в OLAP-отчетах, указывайте в запросе значение параметра build-summary=false. Для крупных сетей значение build-summary=true может привести к зависанию сервера.
При построении OLAP-отчета рекомендуется использовать не более 7 полей.

### При авторизации вы занимаете один слот лицензии.

Токен, который вы получаете при авторизации, можно использовать до того момента, пока он не перестанет работать.
И если у вас только одна лицензия сервера, а вы уже получили токен, следующее обращение к серверу за токеном вызовет ошибку.
Если вам негде хранить токен при работе с сервером API, рекомендуем вам разлогиниться, что приводит к отпусканию лицензии.
